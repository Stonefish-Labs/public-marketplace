---
name: github-publish
description: Publish projects to GitHub cleanly. Use when creating new repos, initializing git, setting up .gitignore, adding topics, or pushing to GitHub. Handles common setup tasks for clean, organized repositories.
---

# GitHub Publish

Publish projects to GitHub with proper setup — .gitignore, README, topics, and clean commits.

## When This Triggers

- User wants to publish/push a project to GitHub
- User asks to create a new repo
- User needs a .gitignore for their project type
- User wants to add topics to a repo

## Prerequisites

### Authentication

The `gh` CLI must be authenticated. Check with:

```bash
gh auth status
```

**Important**: When running `gh auth status` or any `gh` command that accesses the keychain, you need full permissions (no sandbox). The keychain access will fail in a sandboxed environment.

```
# This will fail in sandbox:
gh auth status  # → "token is invalid"

# This works with full permissions:
gh auth status  # → "Logged in to github.com"
```

If auth fails, have the user run interactively:
```bash
gh auth login -h github.com
```

## Authorship Rules (Non-Negotiable)

**All commits, documents, and repo metadata must attribute the USER — never an AI agent.**

1. **Before any git operation**, verify the git identity is the user's:
   ```bash
   git config user.name
   git config user.email
   ```
   - If it returns an agent name (e.g. "Cursor", "Claude", "Copilot", etc.) or is empty, **stop and ask the user** for their name and email before proceeding.
   - **Never** run `git config user.name` or `git config user.email` to set values yourself. The user sets their own identity.

2. **Never add AI agents as contributors** — no "Co-authored-by" trailers, no "Contributors" sections listing agents, no acknowledgments mentioning AI assistance in README or any other file.

3. **Commit messages must not reference AI** — no "Generated by", "Co-authored-by: Cursor", or similar. Write commit messages as if the user wrote them.

4. **Documents (README, etc.) must not mention AI** — no "Built with Cursor", "AI-assisted", or similar unless the user explicitly asks for it.

---

## Workflow

### 1. Ensure .gitignore

Create or update `.gitignore` based on project type. Always include OS-specific files.

**Always include (all projects):**
```gitignore
# OS files
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

# Editor files
*.swp
*.swo
*~
.idea/
.vscode/
*.sublime-*
```

**Add for Python projects:**
```gitignore
# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
env/
venv/
.env
.venv
*.egg-info/
dist/
build/
.pytest_cache/
.mypy_cache/
.ruff_cache/
```

**Add for Node projects:**
```gitignore
# Node
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.npm
.env
.env.local
.env.*.local
dist/
build/
```

**Add for Rust projects:**
```gitignore
# Rust
target/
Cargo.lock
**/*.rs.bk
```

See `references/gitignore-templates.md` for complete templates.

### 2. Ensure README

Every repo needs a README. Minimum structure:

```markdown
# Project Name

One-line description.

## Installation

How to install/setup.

## Usage

How to use it.
```

For skill repos, include installation paths for different agents:
```markdown
## Installation

```bash
# Cursor
cp -r skills/* ~/.cursor/skills/

# Claude Code
cp -r skills/* ~/.claude/skills/

# Codex
cp -r skills/* ~/.codex/skills/

# Roo
cp -r skills/* ~/.roo/skills/
```
```

### 3. Initialize Git

**First**, verify the user's identity is set (see Authorship Rules above):
```bash
git config user.name && git config user.email
```

If both look correct (not an agent name), proceed:
```bash
git init
git add -A
git commit -m "Initial commit: [brief description]"
```

Use descriptive commit messages. For initial commits, summarize what the project does. **Never** include AI attribution in commit messages.

### 4. Create GitHub Repo

```bash
# For personal repo
gh repo create <repo-name> --public --source=. --push --description "Description here"

# For organization repo
gh repo create <org>/<repo-name> --public --source=. --push --description "Description here"
```

**Flags:**
- `--public` or `--private`
- `--source=.` — use current directory
- `--push` — push after creating
- `--description` — repo description

### 5. Add Topics

Topics help discoverability. Add relevant ones:

```bash
gh repo edit <owner>/<repo> --add-topic topic1 --add-topic topic2
```

**Common topics for agent skills:**
- `ai-agents`
- `agent-skills`
- `skills`
- `cursor`
- `claude-code`
- `automation`

**Language-specific:**
- `python`, `typescript`, `rust`, etc.

**Domain-specific:**
- `knowledge-management`, `developer-tools`, `mcp`, etc.

## Complete Example

Publishing a Python agent skill project:

```bash
# 1. Create .gitignore (see templates)
# 2. Ensure README exists

# 3. Initialize and commit
git init
git add -A
git commit -m "Initial commit: Skills for X

- skill-one: Does Y
- skill-two: Does Z"

# 4. Create repo (with full permissions for keychain access)
gh repo create my-org/my-skills --public --source=. --push \
  --description "Skills for doing X"

# 5. Add topics
gh repo edit my-org/my-skills \
  --add-topic ai-agents \
  --add-topic agent-skills \
  --add-topic python
```

## Updating Existing Repos

```bash
# Stage and commit
git add -A
git commit -m "Description of changes"

# Push
git push

# Update topics if needed
gh repo edit owner/repo --add-topic new-topic
```

## Sandbox Note

When using `gh` commands that need keychain access (auth, creating repos), request full permissions:

```
required_permissions: ["all"]
```

This is because:
- `gh auth` stores tokens in the system keychain
- Sandboxed environments block keychain access
- Commands will report "token invalid" even when properly authenticated

## See Also

- `references/gitignore-templates.md` — Complete .gitignore templates by language
- `references/topics-reference.md` — Common GitHub topics for discoverability
